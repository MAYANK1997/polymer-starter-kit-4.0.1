<DialogRoot open={isOpen} onOpenChange={() => onClose()}>
      <DialogContent rounded="xl" shadow="xl" p={6}>
        <DialogHeader>
          <DialogTitle>
            {mode === "edit" ? "Edit Restriction Category" : "Create Restriction Category"}
          </DialogTitle>
          <DialogCloseTrigger />
        </DialogHeader>

        <form onSubmit={handleSubmit(onSubmit)}>
          <DialogBody>
            {/* Category Name */}
            <Fieldset.Root>
              <Fieldset.Content>
                <Field
                  label="Category Name"
                  invalid={!!errors.restrictionCategoryName}
                  errorText={errors.restrictionCategoryName?.message}
                >
                  <Input
                    {...register("restrictionCategoryName", {
                      required: "Category Name is required",
                    })}
                  />
                </Field>
              </Fieldset.Content>
            </Fieldset.Root>

            {/* Description */}
            <Fieldset.Root mt={4}>
              <Fieldset.Content>
                <Field label="Description">
                  <Textarea {...register("description")} />
                </Field>
              </Fieldset.Content>
            </Fieldset.Root>

            {/* Fund Group */}
            <Fieldset.Root mt={4}>
              <Fieldset.Content>
                <Field label="Fund Group">
                  <Select placeholder="Select fund group" {...register("fundGroup")}>
                    <option value="Volantis">Volantis</option>
                    <option value="LOIM IT">LOIM IT</option>
                    <option value="ESG Funds">ESG Funds</option>
                  </Select>
                </Field>
              </Fieldset.Content>
            </Fieldset.Root>

            {/* Fund Names */}
            {fundNames.length > 0 && (
              <Fieldset.Root mt={4}>
                <Fieldset.Legend>Fund Names</Fieldset.Legend>
                <Stack>
                  {fundNames.map((name) => (
                    <Checkbox
                      key={name}
                      checked={selectedFundNames.includes(name)}
                      onCheckedChange={(checked) => {
                        const newFundNames = checked
                          ? [...selectedFundNames, name]
                          : selectedFundNames.filter((n) => n !== name)
                        setValue("fundNames", newFundNames)
                      }}
                    >
                      {name}
                    </Checkbox>
                  ))}
                </Stack>
              </Fieldset.Root>
            )}

            {/* Available For */}
            {availableForOptions.length > 0 && (
              <Fieldset.Root mt={4}>
                <Fieldset.Legend>Available For</Fieldset.Legend>
                <Stack>
                  {availableForOptions.map((option) => (
                    <Checkbox
                      key={option}
                      checked={selectedAvailableFor.includes(option)}
                      onCheckedChange={(checked) => {
                        const newAvailableFor = checked
                          ? [...selectedAvailableFor, option]
                          : selectedAvailableFor.filter((n) => n !== option)
                        setValue("availableFor", newAvailableFor)
                      }}
                    >
                      {option}
                    </Checkbox>
                  ))}
                </Stack>
              </Fieldset.Root>
            )}
          </DialogBody>

          {/* Footer */}
          <DialogFooter>
            <Button variant="outline" onClick={onClose}>
              Cancel
            </Button>
            <Button
              type="submit"
              ml={3}
              loading={createMutation.isPending}
              colorScheme="blue"
            >
              {mode === "edit" ? "Update" : "Create"}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </DialogRoot>
  )
}
