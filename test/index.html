import { useState } from 'react'
import {
  Box,
  Button,
  Checkbox,
  Fieldset,
  For,
  HStack,
  Select,
} from '@chakra-ui/react'

// inside your component (replace current transactionTypes section):

// local state for dropdown open/close
const [isTxDropdownOpen, setTxDropdownOpen] = useState(false)

...

<HStack gap={4} mb={4}>
  <Fieldset.Root>
    <Fieldset.Legend>Allowed Transaction Type</Fieldset.Legend>

    {/* Dropdown wrapper */}
    <Select.Root
      open={isTxDropdownOpen}
      onOpenChange={setTxDropdownOpen}
    >
      <Select.Trigger>
        <Select.ValueText placeholder="Select transaction types" />
        <Select.Indicator />
      </Select.Trigger>

      <Select.Positioner>
        <Select.Content>
          <Box
            border="1px solid"
            borderColor="gray.600"
            borderRadius="md"
            p={3}
            bg="white"
          >
            <Fieldset.Content>
              <For each={['Buy', 'Sell', 'Buy to Cover', 'Sell Short', 'None']}>
                {(value) => (
                  <Checkbox.Root
                    key={value}
                    checked={transactionTypes.includes(value)}
                    onCheckedChange={() => handleTransactionToggle(value)}
                    value={value}
                  >
                    <Checkbox.HiddenInput />
                    <Checkbox.Control />
                    <Checkbox.Label>{value}</Checkbox.Label>
                  </Checkbox.Root>
                )}
              </For>
            </Fieldset.Content>
          </Box>
        </Select.Content>
      </Select.Positioner>
    </Select.Root>
  </Fieldset.Root>
</HStack>
