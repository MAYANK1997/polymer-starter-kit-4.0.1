{/* Transaction types - dropdown with checkboxes (appears only on click) */}
<HStack gap={4} mb={4}>
  <Fieldset.Root>
    <Fieldset.Legend>Allowed Transaction Type</Fieldset.Legend>

    <Popover placement="bottom-start" closeOnBlur={true}>
      <PopoverTrigger>
        <Button
          variant="outline"
          size="sm"
          rightIcon={<FiChevronDown />}
          // show selected text inside the trigger:
        >
          {transactionTypes && transactionTypes.length && !transactionTypes.includes('None')
            ? transactionTypes.join(', ')
            : 'None'}
        </Button>
      </PopoverTrigger>

      <PopoverContent w="auto" minW="240px" p={0} borderRadius="md" overflow="hidden">
        <PopoverBody p={3}>
          <Box border="1px solid" borderColor="gray.600" borderRadius="md" p={2}>
            <Fieldset.Content>
              <For each={['Buy', 'Sell', 'Buy to Cover', 'Sell Short', 'None']}>
                {(value) => (
                  <Box key={value} mb={2}>
                    <Checkbox.Root
                      checked={transactionTypes.includes(value)}
                      onCheckedChange={() => handleTransactionToggle(value)}
                      value={value}
                    >
                      <Checkbox.HiddenInput />
                      <Checkbox.Control />
                      <Checkbox.Label>{value}</Checkbox.Label>
                    </Checkbox.Root>
                  </Box>
                )}
              </For>
            </Fieldset.Content>
          </Box>
        </PopoverBody>
      </PopoverContent>
    </Popover>
  </Fieldset.Root>
</HStack>
